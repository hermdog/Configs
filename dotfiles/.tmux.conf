# 256 colors are nice
set -g default-terminal screen-256color

# longer history
set -g history-limit 4096

# scrollback buffer n lines
set -g history-limit 5000

# start window indexing at one instead of zero
set -g base-index 1

# we'll manage automatic window naming from the shell for now
setw -g automatic-rename off

# enable wm window titles
set -g set-titles on

# wm window title string
set -g set-titles-string "#W [#S:#I]"

set-window-option -g xterm-keys on

# faster command sequences
set -s escape-time 0

# only restrain window size by client size if the client is looking at it
setw -g aggressive-resize on

# monitor windows for activity
setw -g monitor-activity on

# Mouse mode Settings
bind ` setw -g mouse

################
### STATUSBAR###
################
# Show messages longer
set -g display-time 3000

# Load average, date, time
set -g status-right '#(cut -d " " -f 1-3 /proc/loadavg) %Y-%m-%d %H:%M'

# Status bar window status
setw -g window-status-format "#I:#W"
setw -g window-status-current-attr bright
setw -g window-status-current-format "[#I:#W]"

################
#### COLORS ####
################
# solarized color schemee, courtesy https://github.com/seebi/tmux-colors-solarized

# default statusbar colors
set-option -g status-bg colour235 #base02
set-option -g status-fg colour136 #yellow
set-option -g status-attr default

# default window title colors
set-window-option -g window-status-fg colour244
set-window-option -g window-status-bg default
#set-window-option -g window-status-attr dim

# active window title colors
set-window-option -g window-status-current-fg colour166 #orange
set-window-option -g window-status-current-bg default
#set-window-option -g window-status-current-attr bright

# pane border
set-option -g pane-border-fg colour235 #base02
set-option -g pane-active-border-fg colour240 #base01

# message text
set-option -g message-bg colour235 #base02
set-option -g message-fg colour166 #orange

# pane number display
set-option -g display-panes-active-colour colour33 #blue
set-option -g display-panes-colour colour166 #orange

# clock
set-window-option -g clock-mode-colour colour64 #green


################
#### BINDS ####
################
# use screen-style prefix key
set -g prefix C-a
unbind C-b

# send the prefix to client inside window (ala nested sessions)
bind C-a send-prefix
bind a send-prefix

# toggle last window like screen
bind C-a last-window

# Make ctrl-n and ctrl-p act like n and p
bind C-n next-window
bind C-p previous-window

# Bind | to the same as %
bind | split-window -h

# bind C-w to the same as w
bind C-w choose-window

# bind C-Space to the same as Space
bind C-Space next-layout

# select which session this client should use
bind @ choose-session

# confirm before killing a window, session, server
bind \ confirm kill-session
bind C-\ confirm kill-server

# new session
bind C confirm new-session

# split current window into a new session
#bind C-! confirm -p 'Split window into new session?' "command-prompt \"new -s %%; move-window -t %%:2; kill-window -t %%:1; att -t %%\""

# reload a window whose process has exited
bind C-r respawn-window

# refresh display
bind C-l refresh-client
bind l refresh-client

# toggle remaining on exit for the window (ideally this would be pane-local, though)
bind ^ setw remain-on-exit

# reload our configuration
bind r source-file ~/.tmux.conf

# open a man page in a new window
bind / command-prompt "split-window 'exec man %%'"

# quick view of processes
bind '~' split-window "exec htop"

# split windows like vim
# vim's definition of a horizontal/vertical split is reversed from tmux's
bind s split-window -v
bind v split-window -h

# move around panes with hjkl, as one would in vim after pressing ctrl-w
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# resize panes like vim
bind -r < resize-pane -L 3
bind -r > resize-pane -R 3
bind -r - resize-pane -D 1
bind -r + resize-pane -U 1

# vi-style controls for interactive modes
setw -g mode-keys vi
set -g status-keys vi

# don't rename windows automatically
set-option -g allow-rename off
